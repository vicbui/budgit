<!DOCTYPE html>
<html>
	<head>
		<title>My Page</title>
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
			<script src="js/jquery.js"></script>
			<script src="js/global.js"></script>
			<script src="js/jquerymobile.js"></script>	
			<script type="text/javascript" src="cordova-2.1.0.js"></script>
			<script type="text/javascript" src="js/index.js"></script>
			<script src='js/swipe.js' type="text/javascript"></script>


			<link rel="stylesheet" href="css/index.css" type="text/css" />
			<link rel="stylesheet" href="css/style.css" type="text/css"/>
			<link rel="stylesheet" href="css/progressbar.css" type="text/css"/>


			<link href="css/jquery.jqplot.css" rel="stylesheet" type="text/css" />
			<link href="css/mobiscroll.css" rel="stylesheet" type="text/css" />

			<script type="text/javascript">
            
				// alert("test");
				
				$.support.cors = true;
				var search_results=new Array();
				var cat=new Array();
				var str="";
				var search_results=new Object();
				
				var lastdate=new Date("1001/01/01");
				var db ;
				var cats=new Array();
				var timer;
    			var symbols= new Object();
    			var transactionDate = new Object();
				var last_word,symbol="$";
				var trackDecimal=0;
				var date_pending=new Object();
				var afternumber;
				var plot; 
				var current_page=1;
				var itemPerLoad=5;
				var all_cat_static;
				var addResultCallback="",addResultCallbackResult="";
			
				
         // document.addEventListener("deviceready", onDeviceReady, false);
    
           // $(document).bind('deviceready',function()
		 //function onDeviceReady()
            
            
				$('#suggestions').bind('pageinit', function() {
 						//$('#suggestions').listview();    						
						setListDefault();

							//.hide();
					
				});


				/********** add details ************/




				/********* add details *************/

				/****generate list function*****************/
				function addResultToList (db,transactions2,name,itemPerLoad,day,month,year,contextObject,callback,callbackResult)
						{
											addResultCallback=callback;
											addResultCallbackResult=callbackResult;
										/*alert(addResultCallback);	
										alert(addResultCallbackResult);
*/
											transactions2=new Object();
											transactions2.results= new Array();

											var now = new Date();
											
											if (day.length == 1 && day!="-1")
										   	{
										   		day = "0" + day;
										   	}
										   	else 
										   		day="01";
										   
										   	if (month.length==1)
										   		month="0"+month;
											
											var firstday = year+ "-" + month+ "-"+day;
											var lastday= year+"-"+month+ "-"+noDaysInMonth(month,year);
											
											if (((now.getMonth()+1)== month) && (now.getFullYear()==year))
											{
												lastday =  year+"-"+month+"-"+now.getDate();
											}
											listTrans(db,firstday,lastday, function(trans){

											if (addResultCallbackResult!="")
											{
												//alert(addResultCallbackResult);
												addResultCallbackResult(trans);
											}

												//alert(trans.length);
											//	if (callbackResult!="")
												//{
												//	alert(callbackResult);
												//	callbackResult(trans);
												//}
												if (name=="")
														name="%";

												if (name=="ad-hoc")
												{
													db.transaction(function(db){
															for (var i=0;i<trans.length;i++)
															{
																get_budget_by_cat_id_callback(db,trans[i],function(transBudget){
																	//
																	if (transBudget.budget ==-1 || transBudget.budget.amount==0)
																	{
																		if (typeof transactions2.results[transBudget.current_date] ==="undefined")
																		transactions2.results[transBudget.current_date]=new Array();
																		transactions2.results[transBudget.current_date].push(transBudget);
																	}
																});
															}
														},errorDB,function(){
															addToListview(transactions2);

														})

													
												}
												else
												{
													for (var i=0;i< trans.length; i++)
													{

															
														if (((trans[i].name==name) && (name!="%")) || (name=="%"))
														{

															if (typeof transactions2.results[trans[i].current_date] ==="undefined" )	
																transactions2.results[trans[i].current_date]=new Array();
																transactions2.results[trans[i].current_date].push(trans[i]);
															//console.log(trans[i].current_date+" "+trans[i].name+" "+trans[i].amount);
														
														}
													}
													
													addToListview(transactions2);

												}

												$('html').click(function() {
												 //Hide the menus if visible
												 	//alert("Test");
												 	$(".edit_delete").hide();
												 });

												//alert(callback);
												function addToListview(transactions2)
												{
													var results= new Array();
													for (var date in transactions2.results)
													{
														obj=new Object();
														obj.date=date;
														obj.trans=transactions2.results[date];
														var amount=0;
														for (var j=0;j<transactions2.results[date].length;j++)
														{
															amount=amount+Math.abs(transactions2.results[date][j].amount);
														}
														obj.amount=amount;
														results.push(obj);
													
													}
													results.sort(function(a,b) { return  b.date -a.date} );
													//alert(results[0].date);
													$(contextObject).find(".list").html("");
													$(contextObject).find(".list").collapsibleset();

													//console.log("init collapse")
													for (var i=0;i<results.length;i++)
													{
														//console.log(results[i].date+" "+results[i].trans.length);
														var aDate=convertUnixToString(results[i].date);
														var idName='collapse'+i+'page'+current_page+'';
														var str='<div data-role="collapsible">'+
																		'<h2 data-icon="false">'+
																			'<span style="float:left">'+formatDate(aDate)+'</span>'+
																			'<span style="float:right" class="pricecollapse'+i+'page'+current_page+'"></span>'+
																		'</h2>'+	
																		'<span style="float:left" class="dateSelected">'+aDate+'</span>'+
																		'<ul class="collapse'+i+'page'+current_page+'"data-role="listview"></ul></div>'
																		
														//console.log(str);
														$(contextObject).find(".list").append(str);
														$(contextObject).find(".list").collapsibleset("refresh");
														$(contextObject).find(".price"+idName).text("$"+results[i].amount);
														var string="";
														for (var ii in results[i].trans)
														{
															//console.log(results[i].trans[ii].id);
															var optional="<br>"+results[i].trans[ii].optional;
															string+= '<li class="itemDetails" data-icon="false" style="overflow:hidden;font-size:11px;color:gray">';
															string+= '<span style="float:left">'+ capitaliseFirstLetter(results[i].trans[ii].name)+optional+'</span><span id="transId" style="display:none">'+results[i].trans[ii].id+"id"+i+'</span>';
															string+= '<span valign="top" style="float:right">$'+Math.abs(results[i].trans[ii].amount)+'<div id="edit_delete'+results[i].trans[ii].id+"id"+i+'" class="edit_delete" style="padding-left:5px;display:none;float:right">test</div></span>';
															string+= '</li>'
														
														//	$('.edit_delete'+alltrans.results[i].transid)

														}

														$(contextObject).find("."+idName).html(string);
														$(contextObject).find("."+idName).listview();
														$(contextObject).find("."+idName).listview("refresh");
													
													}
												}
												function refreshTransDetails()
												{


															var transactions2=new Object();
															transactions2.results= new Array();
															window.localStorage.setItem('current_page',1);

															var contextObject=window.localStorage.getItem('contextObject');
															//alert(contextObject);
															var list=$(contextObject).find(".list");
															list.html("");

															$(contextObject).find(".list").parent().find(".end").remove();

															//addResultToList(db,transactions2,"",itemPerLoad,contextObject);
																								

														var contextObject=window.localStorage.getItem('contextObject')
														var popup="";
														//alert(contextObject);
														//alert(callback);
														if (contextObject=="#transDetails")
														{
														//	alert("test");
														
															addResultToList(db,transactions2,"",itemPerLoad,-1,now.getMonth()+1+"",now.getFullYear(),contextObject,addResultCallback,addResultCallbackResult);

														}
														else
															if (contextObject=="#cat")
															{
																
																//alert(callbackResult);
																//alert(callback);
																var data=JSON.parse(window.localStorage.getItem("cat"));
																addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject,addResultCallback,addResultCallbackResult);

															}
															else 
																if (contextObject=="#analytic")
																{
																	var data=JSON.parse(window.localStorage.getItem("cat"));
																	addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject,addResultCallback,addResultCallbackResult);			
																} 
														//alert(addResultCallback);
														if (addResultCallback!="")
															{
																//alert(addResultCallback);
																addResultCallback();
															}
													//alert(callback);
															
												}
												$('.recurringDelete').click(function(e){
													//console.log($("#deleteTransDate").text())
													var str=$(this).parent().find("#deleteTransId").text();
													var transid=str.substring(0,str.indexOf("i"));
													var deleteDate=$(this).parent().find("#deleteTransDate").text();
													//alert(deleteDate);
													//alert($(this).parent().parent().parent().html());
													if ($(this).attr("id")=="0")
													{
														//alert(transid+" "+deleteDate);
														db.transaction(function(db)
														{
															//alert(str);
															//alert(transid);
															delete_just_this_trans_by_id(db,transid,deleteDate,0);

													 		//addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject);
													 		

														},errorDB,function(){
															//alert(contextObject);
															refreshTransDetails();

															//initTransDetails();
														});				
																		   		

													}
													else
														if ($(this).attr("id")=="1")
														{
															db.transaction(function(db)
															{
																delete_just_this_trans_by_id(db,transid,deleteDate,1);



														 		//addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject);
														 		

															},errorDB,function(){
																//alert("finish");
																refreshTransDetails();

																//initTransDetails();
															});			
														}
														else
															if ($(this).attr("id")=="2")
															{
																db.transaction(function(db)
																{

																	 delete_all_repeat_by_id(db,transid);

														 		//addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject);
														 		
																},errorDB,function(){															
																	refreshTransDetails();

																	//initTransDetails();
																});			
															}
															else
																if ($(this).attr("id")=="3")
																{

																}
													var popup=window.localStorage.getItem('popup');
													//alert(popup);
													$('#'+popup).popup('close');
													e.preventDefault();
													e.stopImmediatePropagation();
												})

													$('.itemDetails').bind("click",function(event1){
														event1.preventDefault();
														var contextObject=window.localStorage.getItem('contextObject')
														var popup="";
												
														//alert($(this).html());
														var transid=$(this).find("#transId").text();
														//alert(selectedDate);
														//var transid=$(this).parent().find("#transId").text();
														//alert(transid);
														var deleteObj=$(this).find('#edit_delete'+transid);
															if ( typeof deleteObj.find('.delete').html() === "undefined" )
															{
																
																deleteObj.show();
																deleteObj.html('<a class="delete"><img src="img/delete.png" alt="delete" width="12px" height="12px" style="margin-top:0px"/></a>');

																deleteObj.bind("click",function(event1){

																			var transactions2=new Object();
																			transactions2.results= new Array();	
																		//	alert($(this).parent().parent().html());				
																			$("#"+popup).popup();
																			$("#"+popup).popup("open",{transition:'slidedown'});
																			
														var transid=$(this).parent().parent().find("#transId").text();
														var selectedDate=$(this).parent().parent().parent().parent().find(".dateSelected").html();

														if (contextObject=="#transDetails")
														{
															popup="popupDelete";
																$("#popupDelete").find("#deleteTransDate").text(selectedDate);
																$("#popupDelete").find("#deleteTransId").text(transid);
																$("#popupDelete").find("#deleteTransDate").hide();
														}
														else
															if (contextObject=="#cat")
															{
																popup="popupDeleteCat";
																$("#popupDeleteCat").find("#deleteTransDate").text(selectedDate);
																$("#popupDeleteCat").find("#deleteTransId").text(transid);
																$("#popupDeleteCat").find("#deleteTransDate").hide();
															}
															else 
																if (contextObject=="#analytic")
																{
																//	alert("test");
																	popup="popupDeleteAnalytic";
																	$("#popupDeleteAnalytic").find("#deleteTransDate").text(selectedDate);
																	$("#popupDeleteAnalytic").find("#deleteTransId").text(transid);
																	$("#popupDeleteAnalytic").find("#deleteTransDate").hide();
																	
																}
														window.localStorage.setItem('popup',popup);		
														 });	
														}
														else{
																	deleteObj.hide();
																	deleteObj.html("");
															}												


														event1.stopPropagation();
														return false;

													});

											});
										

										}										
										var addToCollapse = function (alltrans,contextObject)
										{
											//alert("test");
											var str="";
											contextObject.find(".price"+alltrans.divname).text("$"+alltrans.total+" ("+alltrans.results.length+")");

											for (var i in alltrans.results)
											{
												//alert()
												var optional="<br>"+alltrans.results[i].optional;
												str+= '<li class="itemDetails" data-icon="false" style="overflow:hidden;font-size:11px;color:gray">';
												str+= '<span style="float:left">'+ capitaliseFirstLetter(alltrans.results[i].name)+optional+'</span><span id="transId" style="display:none">'+alltrans.results[i].transid+'</span>';
												str+= '<span valign="top" style="float:right">$'+alltrans.results[i].amount+'<div id="edit_delete'+alltrans.results[i].transid+'" class="edit_delete" style="padding-left:5px;display:none;float:right">test</div></span>';
												str+= '</li>'
											
											//	$('.edit_delete'+alltrans.results[i].transid)

											}

											contextObject.find("."+alltrans.divname).append(str);
											contextObject.find("."+alltrans.divname).listview();
											contextObject.find("."+alltrans.divname).listview("refresh");

											$('.itemDetails').bind("click",function(event1){
												
													//$.mobile.changePage("#transactionDetails");
													//event1.stopImmediatePropagation();

													event1.preventDefault();
													return false;

												});
	
		
										
											$('.itemDetails').bind("swipeleft",function(event){

												//	$("#lineChart").unbind('jqplotDataClick');
													//alert('.edit_delete'+transid).html();
													var transid=$(this).parent().find("#transId").text();
												//	alert(transid);
													if ( typeof $('#edit_delete'+transid).find('.delete').html() === "undefined" )
													{
														

														$('#edit_delete'+transid).show();
														$('#edit_delete'+transid).html('<a class="delete"><img src="img/delete.png" alt="delete" width="12px" height="12px" style="margin-top:0px"/></a>');

														

														$('#edit_delete'+transid).bind("click",function(event1){
																//alert("test clickevent"+$(this).attr("id"));
																//alert("testevent");
																//alert($(this).find(".already").html());
																if (typeof $(this).find(".already").html() === "undefined" )
																{
																//	alert("undefined");
																	$(this).append("<span class='already' style='display:none'>1</span");
																}
																else
																{
																	//	alert("testee");
																	var transactions2=new Object();
																	transactions2.results= new Array();										

																//	alert($(this).parent().parent().parent().find("#transId").text());

																	var transid=parseInt($(this).parent().parent().parent().find("#transId").text());
																
																	db.transaction(function(db)
												 				   	{
												 				   		delete_trans_by_id(db,transid);
												 						
												 					},errorDB,function()
												 				    		  { 
												 				    		  		window.localStorage.setItem("current_page",1);

																					var data=JSON.parse(window.localStorage.getItem("cat"));
																					
																					var itemPerLoad=window.localStorage.getItem('itemPerLoad');
																					offset=0,limit=0;
																					var contextObject=$("#cat");	
																					contextObject.find(".list").html("");
																					contextObject.find(".list").parent().find(".end").remove();
													 				    		  	
													 				    		  	addResultToList(db,transactions2,data.catName,itemPerLoad,data.day,data.month,data.year,contextObject);



												 				    		  }
												 				   );
																}
																event1.preventDefault();
																event1.stopImmediatePropagation();
																return false;
															})

													}
													else{
														//alert("test");
														$('#edit_delete'+transid).hide();
														$('#edit_delete'+transid).html("");
													}
													//alert($('#edit_delete'+transid));
															
														event.preventDefault();
														event.stopImmediatePropagation();
														return false;
											
												});

													
										
											//	alert(alltrans.results[i].transid);
												
											

											/*	$('html').click(function() {
												 //Hide the menus if visible
												 	//alert("Test");
												 	$(".edit_delete").hide();
												 });
											*/	
								
								
										}
								
									

						/******************************************/

				//jQuery('.selectTime < .ui-btn').css({'height':'20px'});
			

				$("#listCats").live( 'pageshow',function(event, ui){

					var cat=new Object();

					db.transaction(function(db){
									get_all_cats(db,cat)

									},errorDB,function(){
										//alert("test");
										//alert(cat.results.length);
										$("#allCatsList").html("");
										var str="";
										for (var i=0; i<cat.results.length;i++)
										{
											 str=str+'<li class="editable">'+
											 		'<span class="lblCatId" style="display:none">'+cat.results[i].id+'</span>'+
													'<span class="lblCat" style="display:block">'+cat.results[i].name+'</span>'+
													'<input type="text" style="display:none" class="txtCat"></input>'+
													'</li>'
									
										}
										$("#allCatsList").append(str);
										$("#allCatsList").listview();
										$("#allCatsList").trigger("create");
										$("#allCatsList").listview("refresh");



										$(".txtCat").blur(function(){
													$(this).parent().find(".lblCat").show();
													$(this).parent().find(".txtCat").hide();
													$(this).parent().find(".lblCat").text($(this).parent().find(".txtCat").val());
													var name=$(this).parent().find(".lblCat").text();
													var id=$(this).parent().find(".lblCatId").text();
													saveCat(id,name);

											})
											$(".editable").bind("click",function(e){
												e.preventDefault();
												$(this).find(".txtCat").val($(this).find(".lblCat").text());
												$(this).find(".lblCat").hide();
												$(this).find(".txtCat").show();
												$(this).find(".txtCat").focus();
												//alert("test");
												return false;
											});

											$(".txtCat").keyup(function(ev) {
											    // 13 is ENTER
											    if (ev.which === 13 ) {

													$(this).parent().find(".lblCat").show();
													$(this).parent().find(".txtCat").hide();
													$(this).parent().find(".lblCat").text($(this).parent().find(".txtCat").val());
													var name=$(this).parent().find(".lblCat").text();
													var id=$(this).parent().find(".lblCatId").text();
													saveCat(id,name);
											  	}
											});




									});

					function saveCat(id,name)
					{
						db.transaction(function(db){
											update_cat_by_id(db,id,name);
											},errorDB,function(){
										});


					}

					
				})


					
				

				$(document).bind('pageinit',function(event){		
						localStorage.removeItem("Token");

						 $("#add_transaction").click(function(e){
						  	alert("test");
						  })

						preload([
						    'img/delete.png',
						]);		
									
						db= openDB();		
						db.transaction(populateDB, errorDB, successDB);

				/************init sync to be completed ************/	
				/*	SYNCDATA.initSync(function(){
					})*/

					/*	db.transaction(function(db){
							var data= new Array();
							data['cat']="clothes";
							data['createdDate']="2012-12-01 00:00:01";
							//data['createdDate']
							insertNewCat(db,data);
							
						},errorDB,successDB);
					*/

					//	db.transaction(function(db){
											//listTrans(db,"2012-05-05","2012-05-05","");
										//getTotalBalance(db,cats);
					//					}, errorDB, successDB);
				/*	$(document).bind('pagechange',function(e){

								//e.preventDefault();
								//e.stopImmediatePropagation();
								
							//	else 
								if ($.mobile.activePage.attr("id") != "cat") 
								{
									window.localStorage.setItem("cat", "");
									
									if ($.mobile.activePage.attr("id") == "transDetails") 
									{
										
									}
									else
										if ($.mobile.activePage.attr("id") == "analytic") 
						 				{

						 				}
						 				else
						 				if ($.mobile.activePage.attr("id") == "home") 
						 			
										{
											window.localStorage.removeItem("cat");
											window.localStorage.setItem("cat", "");
											//loadAllDashboard();
										

										}
								}
							})	*/
  



		

			});
         
			/****************Helper *******************************/

				    (function ($, undefined) {
				    $.fn.getCursorPosition = function() {
				        var el = $(this).get(0);
				        var pos = 0;
				        if('selectionStart' in el) {
				            pos = el.selectionStart;
				        } else if('selection' in document) {
				            el.focus();
				            var Sel = document.selection.createRange();
				            var SelLength = document.selection.createRange().text.length;
				            Sel.moveStart('character', -el.value.length);
				            pos = Sel.text.length - SelLength;
				        }
				        return pos;
				    }
				})(jQuery);


			function capitaliseFirstLetter(string)
			{
			    return string.charAt(0).toUpperCase() + string.slice(1);
			}

			new function($) {
			  $.fn.setCursorPosition = function(pos) {
			    if ($(this).get(0).setSelectionRange) {
			      $(this).get(0).setSelectionRange(pos, pos);
			    } else if ($(this).get(0).createTextRange) {
			      var range = $(this).get(0).createTextRange();
			      range.collapse(true);
			      range.moveEnd('character', pos);
			      range.moveStart('character', pos);
			      range.select();
			    }
			  }
			}(jQuery);

			function abbrNum(number, decPlaces) {
			    // 2 decimal places => 100, 3 => 1000, etc
			    decPlaces = Math.pow(10,decPlaces);

			    // Enumerate number abbreviations
			    var abbrev = [ "k", "m", "b", "t" ];
			    var i=-1;
			    // Go through the array backwards, so we do the largest first
			    for (i=abbrev.length-1; i>=0; i--) {

			        // Convert array index to "1000", "1000000", etc
			        var size = Math.pow(10,(i+1)*3);

			        // If the number is bigger or equal do the abbreviation
			        if(size <= number) {
			             // Here, we multiply by decPlaces, round, and then divide by decPlaces.
			             // This gives us nice rounding to a particular decimal place.
			             number = Math.round(number*decPlaces/size)/decPlaces;

			             // Handle special case where we round up to the next abbreviation
			             if((number == 1000) && (i < abbrev.length - 1)) {
			                 number = 1;
			                 i++;
			             }
			            

			             // We are done... stop
			             break;
			        }
			    }
			     number=parseFloat(number).toFixed(2);

			             // Add the letter for the abbreviation
			             if (i>-1)
			             number += abbrev[i];

			    return number;
			 }

			 function daysInMonth() {
			 	var now = new Date();
			 		var month = now.getMonth()+1+"";
			 		var year = now.getFullYear()+"";
			 		var current_date= now.getDate();
			 		//alert (current_date);
			 		//alert ((new Date(year, month, 0).getDate())+"");
				    return (new Date(year, month, 0).getDate())-current_date;
				}
			function extractDateFromDatetime(date)
			{
				var tmp=date.split('-');
				return tmp[2];
			}

			function formatDate(date)
			{
				//var aDate= new Date(date);
				//alert("test");
				var today= new Date();
				var yest_date = today.getDate()-1+"";
				var curr_date = today.getDate()+"";
				var curr_month = today.getMonth()+1+"";
				var curr_year = today.getFullYear()+"";
				var today_date = curr_year+"-"+curr_month+"-"+curr_date;
				//alert(today_date);
				if (today_date==date)
					return "Today"
				else
					if ((curr_year+"-"+curr_month+"-"+yest_date)==date)
						return "Yesterday"
					else
					{
						var array=date.split("-");
						return array[2]+"-"+array[1]+"-"+array[0];
					}
					
			}
			function process_seven_days(data)
			 {
			 	//alert("test");
			 	var date=new Array();
			 	var object=new Object();
			 	object.date = "";
			 	object.amount = 0;
			 	//date=data[0].created_at;
			 	//alert(data[0].amount);
			 	var final_date=new Array();

			 	for (var i=6; i>=0;i--)
			 	{
			 		//alert("test");
			 		var aDate= new Date();
			 		aDate.setDate(aDate.getDate()-i);
			 		var curr_date = aDate.getDate()+"";
					var curr_month = aDate.getMonth()+1+"";
					var curr_year = aDate.getFullYear()+"";
				//	final_date[]=0;
					var key=curr_year + "-" + curr_month + "-" + curr_date;
					final_date[key]=0;
					//alert(final_date[key]);
			 	}
			 

			 	for (var i in data)
			 	{

			 			var datetmp=data[i].updated_at+"";
			 			var dateArray = datetmp.split("-");
			 			var cyear=dateArray[0];
					 	var cmonth=dateArray[1];
			 			var cdate=dateArray[2].substring(0,dateArray[2].indexOf(" "));
			 			//alert(data[i].amount+" "+final_date[cyear+ "-" + cmonth + "-" + cdate]);
			 		   	final_date[cyear+ "-" + cmonth + "-" + cdate]+=data[i].amount;
			 		   //	alert(cyear+ "-" + cmonth + "-" + cdate+" "+final_date[cyear+ "-" + cmonth + "-" + cdate]);
			 		   // console.log(cyear);
			 			/*if (object.date !=data[i].created_at)
			 		{
			 			object=new Object();
			 			object.date=data[i].created_at;
			 			object.amount=0;
			 			date.push(object);
			 			//alert(object)
			 		}*/
			 		//alert(data[i].amount);
			 		//date[date.length-1].amount+= data[i].amount;
			 		//console.log(date[date.length-1].date+" "+date[date.length-1].amount);
			 	}
			 	return final_date;
			 	//console.log(date.length);
			 }
			 function noDaysInMonth(month,year) 
			{
			   return new Date(year, month, 0).getDate();
			}
			function getMonthNames(month)
			{
				var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    				"Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
				return monthNames[month];

			}

			function convertUnixToString(unix_timestamp)
			{
				var date = new Date(unix_timestamp*1000);
				return convertDatetimeToString(date)
				// hours part from the timestamp
				/*var year = date.getFullYear();
				// minutes part from the timestamp
				var month = date.getMonth();
				// seconds part from the timestamp
				var day = date.getDate();

				// will display time in 10:30:23 format
				return year + '-' + (month+1) + '-' + day;*/
			}

			function convertToUnixTime(yourDate) {

			    var tmp=yourDate.split("-");
			   	var tmpDate = new Date(tmp[0],tmp[1]-1,tmp[2]);
				return tmpDate.getTime()/1000.0;									
			}



			function convertDatetimeToString(inputDate)
			{
				var now = inputDate;

				var curr_date = now.getDate()+"";
				if (curr_date.length==1)
					curr_date="0"+curr_date;
				var curr_month = now.getMonth()+1+"";
				if (curr_month.length==1)
					curr_month="0"+curr_month;
				var curr_year = now.getFullYear()+"";

				//alert(curr_date);

			   	return curr_year + "-" + curr_month + "-" + curr_date;
			 }

			function timeNow()
			{
				var now = new Date();

				var curr_date = now.getDate()+"";
				var curr_month = now.getMonth()+1+"";
				var curr_year = now.getFullYear()+"";
				var curr_hour = now.getHours()+"";
				var curr_min = now.getMinutes()+"";
				var curr_sec = now.getSeconds()+"";


				if (curr_min.length == 1)
			   	{
			   	curr_min = "0" + curr_min;
			   	}
			   //	alert(curr_min.length+" "+curr_min);
			   	if (curr_hour.length == 1)
			   	{
			   	curr_hour = "0" + curr_hour;
			   	}
			   	if (curr_sec.length == 1)
			   	{
			   	curr_sec = "0" + curr_sec;
			   	}
			   	return curr_year + "-" + curr_month + "-" + curr_date+" "+curr_hour+":"+curr_min+":"+curr_sec;
			}
			function preload(arrayOfImages) {
			    $(arrayOfImages).each(function(){
			        $('<img/>')[0].src = this;
			        // Alternatively you could use:
			        // (new Image()).src = this;
			    });
			}
			function refreshPage() {
			  $.mobile.changePage(
			    window.location.href,
			    {
			      allowSamePageTransition : true,
			      transition              : 'none',
			      showLoadMsg             : false,
			      reloadPage              : true,
			      changeHash			  : false
			    }
			  );
			}


			/****************************************/
        
	</script>
	</head>
	<body>

		<div data-role="page" id="home">

			<div data-role="header" data-theme="b" style="height:30px;">
			
				<h1>Budgit</h1> <!--data-rel="dialog"-->
				<!--<a href="#addPage"  data-icon="plus"  class="ui-btn-right" style="margin-top:-3px" data-inline="true" data-iconpos="notext" data-transition="slideup" >Add</a> -->
			
							
			</div>
			<!-- /header -->
			<div data-role="content" style="padding:0px 0px 0px 0px;">
				<div id="profile" style="height:90px; background-color:gray;color:white;padding:5px 0px 5px 10px;" class="ui-body ui-body-a">
						<div style ="overflow: hidden;width: 100%;">
							<div class="profilePicture">
								<img src='img/vicbui.jpg' width='70px' height='70px' style="padding-top:5px"/>
							</div>

							<div style="padding:0px 0px 0px 10px;float:left;">
								<h4 style="padding:0px 0px 0px 0px;margin:0px 0px 0px 0px">Vic Bui </h4>
						
							<div style="padding-top:5px;margin-left:0px">

									<div style="font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:45px;text-align:center"> <div id="barChartbalanceL" >$13 </div>
											<div class="left" style="font-size:11px;font-weight:bold;">Left</div>
									</div>
									<div style="float:left;width:120px" class="bigChart">
									<!--	<div id="barChartbalance" style="height:50px;width:120px;z-index:0;margin-left:-3px;margin-top:-10px;float:left;display:none">
											</div> -->
										<div style="width:100px;margin-left:12px;margin-top:0px;" class="progress-bar red shine">
										    <span id="barChartbalance" style="width: 25%"></span>
										    <div class="limitLine" style="width:60px">
										 	</div>
										 	 <div class="dateCirle badgeBlue" style="left:44px">
												<div class="date ">22<br>Nov</div>
											 </div>
										
										</div>
											
									</div>

									<div style="margin-top:0px;font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:50px;text-align:center"><div id="barChartbalanceS" >$15 </div>
											<div style="font-size:11px;padding-top:0px;margin-top:0px;font-weight:bold;">Spent</div>
									</div>

								
							</div>
						</div>
					</div>

				</div>
					

					<div id="transmain" style="font-size:11px;color:dark-gray; padding:0px 5px 0px 5px;">
					<div id='position' style="text-align:center" class="swipe"><em id="0" class='on nav'>&#x25cf</em><em id="1" class='nav'>&#x25cf</em></div>
					
					<div class='swipe'>
						<div>
							 <div style='display:block'>
												<div id="allcats">
												</div>

											
							</div>

				<!--Transaction details page-->
				<div style='display:block'>

					<div data-role="popup" id="popupDelete" data-theme="a">
								    	  
							<div style="padding:10px 10px;">
								<h4>Delete the repeating expense</h3>
								<span style="display:none" id="deleteTransDate"></span>	
								<span style="display:none" id="deleteTransId"></span>
								<a href="#" data-role="button" data-theme="b" id="0" class="recurringDelete">Just this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="1" class="recurringDelete">This expense and stop repeat</a> 
								<a href="#" data-role="button" data-theme="b" id="2" class="recurringDelete">All repeats of this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="3" class="recurringDelete">Cancel</a> 
							</div>

					</div>							
					<div id="transDetails">

												
													<div style="text-align:center">
															
														<div data-role="collapsible-set" data-theme="c" data-content-theme="d" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-inset="true" class="list">
														
															
															<!--<div data-role="collapsible">
																<h2 data-icon="false">
																	<span style="float:left">23 OCT 2012</span>
																	<span style="float:right" class="ui-li-count"> (2) </span>
																	<span style="float:right">$200</span>
																	
																</h2>
																<ul data-role="listview">
																	<li data-icon="false">
																			<span style="float:left">$100</span>
																			<span style="float:right">10:34 </span>			
																	</li>
																    <li data-icon="false">$30</li>
																
																</ul>
															</div>	-->
														</div>


														<!--<a class="loadmore" href="#" >Load more... </a>-->
										
													</div>
					 						</div>
					

					</div>
				</div>
			</div>
		 </div>

	 </div>
			<!-- /content -->
		
		<!-- footer -->
		<div data-role="footer" data-position="fixed" data-theme="a" data-id="footbar"   data-tap-toggle="false">
			<div data-role="navbar">
				<ul>
					<li><a href="#home" class="ui-btn-active ui-state-persist">Overall</a></li>
					<li><a href="#analytic">Insight</a></li>
					<li style=""> <a class="my-btn" href="#addtrans" data-corners="true" data-transition="slideup">Add</a></li>
					<li><a href="#budget">Budget</a></li>
					<li><a href="#">More</a></li>

				</ul>
			</div>
	   	</div>
   		<!-- /footer -->
	

    </div>
		<!-- /page -->


		<!-- add trans page -->	
		<div data-role="page" id="addtrans">

			<div data-role="header" data-theme="b" style="height:30px;">
				<a id="deleteBtn" data-icon="delete" data-inline="true"  data-mini="true" data-iconpos="notext" data-rel="back"  style="margin-top:-3px;">Delete</a>
				
				<h1>Budgit</h1> <!--data-rel="dialog"-->
				<!--<a href="#addPage"  data-icon="plus"  class="ui-btn-right" style="margin-top:-3px" data-inline="true" data-iconpos="notext" data-transition="slideup" >Add</a> -->
				<a id="add" data-icon="plus"  data-inline="true"  data-mini="true" class="ui-btn-right" data-iconpos="notext" style="margin-top:-3px;">Post</a>
				
							
			</div>
			<!-- /header -->
			<div data-role="content" style="padding:0px 0px 0px 0px;">
					<div style="font-size:11px;color:dark-gray; padding:0px 5px 0px 5px;">

						<div id="todayTxt">
							Today's transaction :	
						</div>			
						<input type="text" id="track_area" class="defaultTextActive" title="E.g: $10 #saving" value="E.g: $10 #saving" data-prevent-focus-zoom="true"></input>
					</div>		
											<div id="functionBar" style="">
												<div style="font-size:11px;color:dark-gray; padding-bottom:0px;" id="instructionTxt">
													<div class="navlink ui-grid-a" data-role='none'>
															

															<div class="ui-block-a scrollable" id="resultMsg" style="text-align: left;height:50px"></div>
															
															<div class="ui-block-b scrollable" id="errorMsg"  style="color:red;text-align:left;height:50px">
																	
															</div>
													</div>
												</div>

												
												<ul id="suggestions" data-role="listview" data-inset="true" class="scrollable" style="display:none"> </ul>




												<div id="functionBarTime" style="padding-bottom:0px;overflow:hidden">
													<fieldset data-role="controlgroup" data-mini="true" data-type="horizontal" id="radioBtns" style="float:left;width:40%;padding-top:10px">
														
															<input type="radio" name="transType" id="radioIncome" value="+" style="font-size:10px; height:0px" />
														 	<label for="radioIncome" class="radiobtn" >Income</label>


															<input type="radio" name="transType" id="radioExpense" value="-" checked="true" style="font-size:10px; height:0px"/>
															<label for="radioExpense" class="radiobtn">Expense</label>

																								
													</fieldset>	
										
													<div style="float:right;padding-bottom:5px;width:100px">
												        <select name="selectRecurring" id="selectRecurring" data-theme="c" data-mini="true" data-prevent-focus-zoom="true" >
												        	<option value="-1">Recurring</option>
												        </select>
												    </div>
												</div>

												<div style="background-color:lightgray; height:25px;" >

													<div class="navlink" data-role='none'>

														<div style="width:100%;float:left">
																
																<a class="links" data-role='none' name="#" href="#" style="float:left;width:20%;"># </a> 
																
																<a class="links" data-role='none' name="~"  href="#" style="float:left;width:5%;">~ </a>
																

																<div class="navlink" style="text-align: right; margin-top:3px;padding-right:10px;float:left;width:30%;">
																	<input id="scroller" name="scroller" style="display:none;" />
																	<a href="#" id="dateLnk" style="font-size:16px;color: gray;" >
																		12-20-32
																	</a>
																</div>



														
																	<!-- <div class="ui-block-a">	
																		<a class="links" data-role='none' name="+" href="#">+ </a></div>
																	<div class="ui-block-b">	
																		<a class="links" data-role='none' name="-" href="#">- </a>
																	</div> -->

															
														</div>
														<!--<div class="ui-block-b">
															<div class="ui-grid-a">
																						</div>
														-->
													</div>
														
														 
												</div> 
											</div>	
					</div>
					<!-- footer -->
			   		<!-- /footer -->

		</div>
		<!-- /add trans -->

		<!-- cat page -->
		<div data-role="page" id="cat">
		
			<div data-role="header" data-theme="b" style="height:30px;">
				<a id="cancelCatBtn" data-icon="delete" data-inline="true"  data-mini="true" data-iconpos="notext" style="margin-top:-3px; display:none">Delete</a>
				<a id="deleteCatBtn" data-icon="delete" data-inline="true"  data-mini="true" data-iconpos="notext" data-rel="back" style="margin-top:-3px">Delete</a>
				<h1 style="margin-top:-15px">Budgit</h1>
				<a id="add" data-icon="plus"  data-inline="true"  data-mini="true" class="ui-btn-right" data-iconpos="notext" style="margin-top:-3px">Post</a>
				
			</div>
			<!-- /header -->

			<div data-role="content" style="padding:0px 0px 0px 0px;">
				<div data-role="popup" id="popupDeleteCat" data-theme="a">
								    	  
							<div style="padding:10px 10px;">
								<h4>Delete the repeating expense</h4>
								<span style="display:none" id="deleteTransDate"></span>	
								<span style="display:none" id="deleteTransId"></span>
								<a href="#" data-role="button" data-theme="b" id="0" class="recurringDelete">Just this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="1" class="recurringDelete">This expense and stop repeat</a> 
								<a href="#" data-role="button" data-theme="b" id="2" class="recurringDelete">All repeats of this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="3" class="recurringDelete">Cancel</a> 
							</div>

					</div>	
				<div id="profileCat" style="height:80px; background-color:gray;color:white;padding:5px 0px 5px 10px;" class="ui-body ui-body-a profileHide">
						<div style ="overflow: hidden;width: 100%;">
							<div style="float:left;height:60px;width:60px;text-align:center;padding:5px" class="badgeBlue">
									<div id="dateLeft" style="font-size:40px">10</div> 
									<div style="font-size:12px">days left</div>
							</div>
							<div style="padding:5px 0px 0px 10px;float:left" id="total">

								<h4 style="padding:0px 0px 5px 0px;margin:0px 0px 0px 0px" id="catTitle">Food </h4>
								
									<div style="font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:45px;text-align:center"> <div id="barCharttotalL" >$13 </div>
											<div class="left" style="font-size:11px;font-weight:bold;">Left</div>
									</div>
									<div style="float:left;width:120px" class="bigChart">
									<!--	<div id="barChartbalance" style="height:50px;width:120px;z-index:0;margin-left:-3px;margin-top:-10px;float:left;display:none">
											</div> -->
										<div style="width:100px;margin-left:12px;margin-top:0px;" class="progress-bar red shine">
										    <span id="barCharttotal" style="width: 25%"></span>
										    <div class="limitLine" style="width:60px">
										 	</div>
										 	 <div class="dateCirle badgeBlue" style="left:44px">
												<div class="date ">22<br>Nov</div>
											 </div>
										
										</div>
											
									</div>

									<div style="margin-top:0px;font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:50px;text-align:center"><div id="barCharttotalS" >$15 </div>
											<div style="font-size:11px;padding-top:0px;margin-top:0px;font-weight:bold;">Spent</div>
									</div>

							<!--	<div style="float:left;padding-right:10px">
						
									<div id="total" style="padding-top:0px;margin-left:0px">

										<div style="font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:45px;text-align:center"> <div id="barCharttotalS" >$13 </div>
												<div id="barCharttotalSLabel" style="font-size:11px;font-weight:bold;">Spent</div>
										</div>
										<div style="float:left;width:120px" class="bigChart">
											<div id="barCharttotal" style="height:50px;width:120px;z-index:0;margin-left:-3px;margin-top:-10px;float:left">
												</div>
										
												
										</div>

										<div style="margin-top:0px;font-size:14px;color:white;font-weight:bold;z-index:100;float:left;width:50px;text-align:center"><div id="barCharttotalL" >$15 </div>
												<div id="barCharttotalLLabel" style="font-size:11px;padding-top:0px;margin-top:0px;font-weight:bold;">Left</div>
										</div>

									
										</div>
								</div> -->
							</div>
							
							
							
						</div>	
				</div>
				<div style="font-size:11px;color:dark-gray; padding:5px 5px 10px 5px">
						
						<div id="todayTxtCat">
							Today's transaction :	
						</div>

						<div style="float:left;font-weight:bold;font-size:16px;padding:16px 5px 0px 0px;text-align:center" type="text" id="catLbl" class="defaultTextActive" title="E.g: $10" value="E.g: $10" data-prevent-focus-zoom="true">#Food</div>

						<input style="float:left;max-width:70%" type="text" id="cat_track_area" class="defaultTextActive" title="E.g: $10" value="E.g: $10" data-prevent-focus-zoom="true"></input>
						<!-- <div style="font-size:13px;font-weight:bold;color:gray;text-align:center;clear:both">
							Monthly Summary 
						</div> -->
						<div class="ui-grid-a profileHide" style ="overflow: hidden;width: 100%;padding-bottom:5px">

							<div class="ui-block-a" style="padding-left:5px;margin-top:15px;" >
								<!--<div id="lineChart" style="height:200px;width:180px;font-size:16px;margin-left:-16px; margin-top:-5px"></div>
								<div class="legend" style="font-size:11px;color:gray;margin-top:-40px;z-index:100;height:20px;">
									<div id="legendLine" style="padding-left:2px;z-index:100">Food Expenses Last 7 days</div>
								</div>-->
								<div id="avgSpend" style="overflow:hidden;padding-bottom:15px">
									<div style="float:left;padding-right:5px;">
										<div style="height:43px;width:50px;text-align:center;" class="badgeBlue">
											<div id="amountMax" style="font-size:12px;padding-top:6px">$200.00</div> 
											<div style="font-size:10px;font-weight:normal">Max</div>
										</div>
										<div style="height:42px;width:50px;text-align:center;margin-top:3px" class="badgeBlue">
											<div id="amountMin" style="font-size:12px;padding-top:6px">$100.00</div> 
											<div style="font-size:10px;font-weight:normal">Min</div>
										</div>
									</div>
									<div style="float:left;height:90px;width:90px;text-align:center;vertical-align: middle;" class="badgeBlue">
										<div id="amountAvg" style="font-size:22px;padding-top:20px">$20.00</div> 
										<div style="font-size:12px">Average</div>
									</div>

								</div>
								<div id="legendLine" style="font-size:12px;color:gray;text-align:center; width:130px"> Spending This Month</div>
								
							</div>
							<div class="ui-block-b">
								<div id="donutChart" style="width:170px;height:170px;color:white;font-size:16px;margin-left:-15px;margin-top:-20px;padding-bottom:0px;z-index:0"></div>
									<div class="legend" id="legendPie" style="font-size:12px;color:gray;margin-top:-32px;z-index:100;height:20px; width:text-align:center; margin-left:20px;display:none">
										<div style="padding-left:2px;z-index:100">of Total Spending</div>
										<div id="valueDonutChart" style="z-index:1000;font-size:26px;color:gray;font-weight:bold;margin-top:-90px;margin-left:25px">18%</div>
									</div>
								
							
							</div>
							
						</div>
					
						<div style="padding-top:5px;padding-left:5px; text-align:center">
						
						<div data-role="collapsible-set" data-theme="c" data-content-theme="d" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-inset="true" class="list profileHide">
						
							
						</div>
						<!--	<div data-role="collapsible">
								<h2 data-icon="false">
									<span style="float:left">23 OCT 2012</span>
									<span style="float:right" class="ui-li-count"> (2) </span>
									<span style="float:right">$200</span>
									
								</h2>
								<ul data-role="listview">
									<li data-icon="false">
											<span style="float:left">$100</span>
											<span style="float:right">10:34 </span>			
									</li>
								    <li data-icon="false">$30</li>
								
								</ul>
							</div>-->	
						<!--<a class="loadmore" href="#" >Load more... </a>-->
					
						</div>
					


							<!--	<ul data-role="listview" data-theme="d"  data-divider-theme="d">
									<li data-role="list-divider">Food Expenses
									  <span class="ui-li-aside"> OCT 2012</span> 
										<span class="ui-li-count">5</span>
									</li>
									<li><a href="index.html">
										
											$200
											<span class="ui-li-aside">Today</span> 
											<span class="ui-li-count">5</span>
										
										</a>
									</li>
									<li><a href="index.html">
											$200
											<span class="ui-li-aside">23 OCT 2012</span> 
											<span class="ui-li-count">2</span>
										
										
										</a>
									</li>
								</ul> -->
						</div>

									
				</div>

		<!-- footer -->
		<div data-role="footer" data-id="footbar"  data-position="fixed" data-theme="a"   data-tap-toggle="false">
			<div data-role="navbar">
				<ul>
					<li><a href="#home">Overall</a></li>
					<li><a href="#analytic">Insight</a></li>
					<li style=""> <a class="my-btn" href="#addtrans" data-corners="true" data-transition="slideup">Add</a></li>
					<li><a href="#budget">Budget</a></li>
					<li><a href="#">More</a></li>

				</ul>
			</div>
	   	</div>
   		<!-- /footer -->			
		</div>

		<!-- /Cat -->	
		<!--Analytic -->

		<div data-role="page" id="analytic">
			<div data-role="header" data-theme="b" style="height:30px;">

				<a data-icon="delete" data-inline="true"  data-mini="true" data-iconpos="notext" data-rel="back"  style="margin-top:-3px">Delete</a>
				<h1 style="margin-top:4px">BudgIt Insight</h1>
				<a data-icon="search" data-inline="true"  data-mini="true" data-iconpos="notext" style="margin-top:-3px">search</a>
				
			</div>
			
			<div data-role="content" style="padding:0px 0px 0px 0px;">
				<div data-role="popup" id="popupDeleteAnalytic" data-theme="a">
								    	  
							<div style="padding:10px 10px;">
								<h4>Delete the repeating expense</h4>
								<span style="display:none" id="deleteTransDate"></span>	
								<span style="display:none" id="deleteTransId"></span>
								<a href="#" data-role="button" data-theme="b" id="0" class="recurringDelete">Just this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="1" class="recurringDelete">This expense and stop repeat</a> 
								<a href="#" data-role="button" data-theme="b" id="2" class="recurringDelete">All repeats of this expense</a> 
								<a href="#" data-role="button" data-theme="b" id="3" class="recurringDelete">Cancel</a> 
							</div>

					</div>	
			   <div id="profile" style="height:60px;overflow:hidden;;color:white;padding:8px 0px 5px 5px;" class="ui-body ui-body-a">
					<div id="timespan" style="font-size:12px;font-weight:bold;padding-bottom:2px;text-align:center;float:left">
						<!--<fieldset data-role="controlgroup" data-mini="true" data-type="horizontal" id="radioBtns" style="padding-top:5px">
						
							<input type="radio" name="transType" id="radioDate" value="+" style="font-size:10px; height:0px" data-theme="c"/>
							<label for="radioDate" class="radiobtnTime">Date</label>
							
							<input type="radio" name="transType" id="radioMonth" value="-" checked="true" style="font-size:10px; height:0px" data-theme="c"/>
							<label for="radioMonth" class="radiobtnTime">Month</label>

							<input type="radio" name="transType" id="radioYear" value="-" style="font-size:10px; height:0px" data-theme="c"/>
							<label for="radioYear" class="radiobtnTime">Year</label>
							
						</fieldset>-->
						<div>
							<div style="float:left" id="divselectDay">
						        	<select name="selectDay" id="selectDay" data-theme="c" data-mini="true">
						        	<option value="-1">All</option>

						        </select>
						    </div>
						    <div style="float:left">
						        <select name="selectMonth" id="selectMonth" data-theme="c" data-mini="true">
						        </select>
						    </div>
 						    <div style="float:left">

						        <select name="selectYear" id="selectYear" data-theme="c" data-mini="true">
						            <!-- etc. -->
						        </select>
						    </div>
						</div>
							<div id="divSelectCat">
							 	<select id="selectCat" data-theme="c" data-mini="true">
								   <option value="-1">All</option>
								</select>
					    	</div>
					</div>
	
					<div id="avgSpend" style="float:right;overflow:hidden;padding-right:10px">
						
						<div style="">
							<div style="float:left;height:50px;width:50px;text-align:center;vertical-align:middle;margin-top:0px" class="badgeRed">
								<div id="amountSpent" style="font-size:12px;padding-top:5px;font-weight:bold">$20.00</div> 
								<div style="font-size:10px">Spent</div>
							</div>	
						
							<!--<div style="float:left;height:50px;width:50px;text-align:center;margin-left:5px;margin-top:0px" class="badgeGreen">
								<div id="amountSave" style="font-size:12px;padding-top:5px;font-weight:bold">$20.00</div> 
								<div style="font-size:10px">Save</div>
							</div>-->
						</div>

					</div>
				</div>
				<div id='positionInsight' style="text-align:center"><em id="0" class='on navone'>&#x25cf</em><em id="1" class='navone'>&#x25cf</em><em id="2" class='navone'>&#x25cf</em></div>
				<div id='slider' class="swipe" style="margin-top:-10px">
					<div>
						<div style="display:block;text-align:center">
							<div class="chartEmpty" style="margin-top:10px;display:none">No Transaction Found</div>
							<div id="pieChartInsight" style="width:290px;height:290px;margin-top:-10px;margin-left:10px;"></div>
						</div>
						<div style="display:none;text-align:center">
							<div class="chartEmpty" style="margin-top:10px;display:none">No Transaction Found</div>
							<div id="lineChart" style="width:310px;height:250px;margin-top:0x;margin-left:5px"></div>
						</div>
						<div style="display:none;text-align:center; font-size:11px">
							<div data-role="collapsible-set" data-theme="c" data-content-theme="d" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-inset="true" class="list" style="padding:10px 10px 0px 10px;">
							</div>
							
							<!--<a class="loadmore" href="#" >Load more... </a> -->

						</div>
					</div>
				</div>
		</div>
	
		<!-- footer-->
		<div data-role="footer" data-id="footbar" data-position="fixed" data-theme="a"  data-tap-toggle="false">
			<div data-role="navbar">
				<ul>
					<li><a href="#home" >Overall</a></li>
					<li><a href="#analytic" class="ui-btn-active ui-state-persist">Insight</a></li>
					<li style=""> <a class="my-btn" href="#addtrans" data-corners="true" data-transition="slideup">Add</a></li>
					<li><a href="#budget">Budget</a></li>
					<li><a href="#">More</a></li>

				</ul>
			</div>
	   	</div>
		<!-- footer-->
	
	</div>
		<!--page track -->


<!--Categories -->

		<div data-role="page" id="listCats">
			<div data-role="header" data-theme="b" style="height:30px;">

				<a data-icon="delete" data-inline="true"  data-mini="true" data-iconpos="notext" href="index.html" style="margin-top:-3px">Delete</a>
				<h1 style="margin-top:4px">All Categories</h1>

				
			</div>
			<!-- /header -->
			<div data-role="content">

				<ul id="allCatsList" data-role="listview" data-filter="true"  data-filter-placeholder="Search Categories.." data-inset="true">
			
				</ul>
			</div>
		</div> 


<!---categories -->

<!--login -->

		<div data-role="page" id="login">
			<div data-role="header" data-theme="b" style="height:30px;">

				<h1 style="margin-top:4px">Budgit</h1>

				
			</div>
			<!-- /header -->
			<div data-role="content">
				<div style="">
					<form id="loginForm" method="post">
						<input type="text" name="email" id="email" value=""  placeholder="Email"/>
	    				<input type="password" name="password" id="password" value=""  placeholder="Password"/>
						<input data-role="submit" type="submit" value="Login" />
						<div id="result"> </div> 
					</form>

	    			<a href="#register" style="float:left" class="navlink">Sign up</a>
					<a href="#forgotPassword" style="float:right" class="navlink">Forgot Password</a>

				</div>
			</div>
		</div> 

<!---login -->

<!--Sign up -->

		<div data-role="page" id="register">
			<div data-role="header" data-theme="b" style="height:30px;">

				<h1 style="margin-top:4px">Sign up</h1>

				
			</div>
			<!-- /header -->
			<div data-role="content">
				<div style="">
    				<form id="signupForm" method="post">
						<input type="text" name="username" id="username" value=""  placeholder="Your Name"/>
						<input type="text" name="email" id="email" value=""  placeholder="Your Email"/>
	    				<input type="password" name="password" id="password" value=""  placeholder="Your Password"/>
						<input data-role="submit" type="submit" value="Register" />
						<div id="result"> </div> 
					</form>
    			</div>
			</div>
		</div> 

<!---register -->


<!--Budget -->

		<div data-role="page" id="budget">
			<div data-role="header" data-theme="b" style="height:30px;">
				<h1 style="margin-top:4px">Set Budget</h1>
				<a data-icon="check" data-inline="true"  data-mini="true" data-iconpos="notext" class="ui-btn-right" style="margin-top:-4px" id="saveBtn">Edit</a>

				
			</div>
			<!-- /header -->
			<div data-role="content">
				<div style="">
    				<span id="txtparsed" style="display:none"></span>
	    				How much can you spend a month?
	    				<input type="tel" pattern="\d+(\.\d*)?" placeholder="Budget Total (SGD)" id="budgetTxt" value="0.00"></input>
	    				
	    			<div id="budgetDetails" style="display:none">
	    				What do you want to spend on ?
	    				<ul id="expenseList" data-role="listview" data-inset="true">
							<li><a href="#expensesPage" data-transition="slide"> Number of Categories</a> <span id="catCounter"class="ui-li-count">all</span></a> </li>
						</ul>
						<span id="selectedCatId" style="display:none">0</span>
						Allocate $<span id="amount">100</span> into specific categories<br>
						<ul id="cats" data-role="listview"  data-inset="true">
					
					</div>
				</div>
				
			</div>

				<!-- footer-->
			<div data-role="footer" data-id="footbar" data-position="fixed" data-theme="a"  data-tap-toggle="false">
				<div data-role="navbar">
					<ul>
						<li><a href="#home" >Overall</a></li>
						<li><a href="#analytic" >Insight</a></li>
						<li style=""> <a class="my-btn" href="#addtrans" data-corners="true" data-transition="slideup">Add</a></li>
						<li><a href="#budget" class="ui-btn-active ui-state-persist">Budget</a></li>
						<li><a href="#">More</a></li>

					</ul>
				</div>
		   	</div>
			<!-- footer-->
		</div> 

<!---budget -->
<!--Expenses list -->

		<div data-role="page" id="expensesPage">
			<div data-role="header" data-theme="b" style="height:35px;">
				<a data-rel="back" data-inline="true"  data-mini="true" style="margin-top:0px">Cancel</a>
					<h1 style="margin-top:4px">Budget For</h1>
				<a data-rel="back" id="expenseDone"  data-inline="true"  data-mini="true"  style="margin-top:0px">Done</a>
			</div>
			<div data-role="content">
				<div class="catChks">
					<fieldset data-role="controlgroup">
						
			    	</fieldset>
				</div>
					
			</div>
		</div>

<!-- expenses list -->

<!--Experiemnt page -->

		<div data-role="page" id="test">
			<div data-role="header" data-theme="b" style="height:35px;">
				
			</div>
			<div data-role="content">
				<div id="chart1">
				</div>
			</div>
		</div>

<!-- Experiement page -->


	<script src="js/webSqlSync.js" type="text/javascript"></script>
	<script src="js/sync.js" type="text/javascript"></script>	
	<script type="text/javascript" src="js/database.js"></script>
	<script src="js/mobiscroll.js" type="text/javascript"></script>
	
	<script src="js/jqmcharts/jquery.jqplot.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.pointLabels.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.barRenderer.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.categoryAxisRenderer.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.donutRenderer.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.pieRenderer.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.highlighter.min.js" type="text/javascript"></script>
	<script src="js/jqmcharts/jqplot.dateAxisRenderer.min.js" type="text/javascript"></script>

	<script type="text/javascript" src="js/jqmcharts/jqplot.canvasTextRenderer.min.js"></script>
	<script type="text/javascript" src="js/jqmcharts/jqplot.canvasAxisTickRenderer.min.js"></script>
	<script type="text/javascript" src="js/jqmcharts/jqplot.canvasOverlay.min.js"></script>

	<script src="js/inputText.js" type="text/javascript"></script>
	<script src="js/barchart.js" type="text/javascript"></script>

	<script src="js/addtrans.js" type="text/javascript"></script>
	<script src="js/home.js" type="text/javascript"></script>

	<script src="js/cat.js" type="text/javascript"></script>


	<script src="js/jquery.validate.js" type="text/javascript"></script>	
	<script src="js/jquery.form.js" type="text/javascript"></script>	
	<script src="js/login.js" type="text/javascript"></script>
	<script src="js/signup.js" type="text/javascript"></script>
	<script src="js/auth.js" type="text/javascript"></script>
	<script src="js/budget.js" type="text/javascript"></script>
	<script src="js/insight.js" type="text/javascript"></script>
	<script src="js/test.js" type="text/javascript"></script>



<!-- -->
	</body>
</html>